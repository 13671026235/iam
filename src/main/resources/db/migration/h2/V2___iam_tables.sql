CREATE TABLE iam_account (ID BIGINT NOT NULL, PASSWORD VARCHAR(128), USERNAME VARCHAR(128) NOT NULL UNIQUE, UUID VARCHAR(36) NOT NULL UNIQUE, oidc_account_id BIGINT, SAMLACCOUNT_ID BIGINT, iam_user_info_id BIGINT, PRIMARY KEY (ID));
CREATE TABLE iam_account_user_info (ID BIGINT NOT NULL, BIRTHDATE VARCHAR, EMAIL VARCHAR(128) NOT NULL, EMAILVERIFIED BOOLEAN, FAMILYNAME VARCHAR(128) NOT NULL, GENDER VARCHAR, GIVENNAME VARCHAR, LOCALE VARCHAR, MIDDLENAME VARCHAR, NAME VARCHAR(128) NOT NULL, NICKNAME VARCHAR, PHONENUMBER VARCHAR, PHONENUMBERVERIFIED BOOLEAN, PICTURE VARCHAR, PROFILE VARCHAR, UPDATEDTIME VARCHAR, WEBSITE VARCHAR, ZONEINFO VARCHAR, ADDRESS_ID BIGINT, DTYPE VARCHAR(31), PRIMARY KEY (ID));
CREATE TABLE iam_authority (ID BIGINT NOT NULL, auth VARCHAR(128) NOT NULL UNIQUE, PRIMARY KEY (ID));
CREATE TABLE iam_group (ID BIGINT NOT NULL, DESCRIPTION VARCHAR(512), NAME VARCHAR(255) NOT NULL UNIQUE, UUID VARCHAR(36) NOT NULL UNIQUE, PRIMARY KEY (ID));
CREATE TABLE iam_oidc_account (ID BIGINT NOT NULL, ISSUER VARCHAR(256) NOT NULL, SUBJECT VARCHAR(256) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE iam_saml_account (ID BIGINT NOT NULL, IDPID VARCHAR(256) NOT NULL, USERID VARCHAR(256) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE iam_account_authority (iam_account_id BIGINT NOT NULL, iam_authority_id BIGINT NOT NULL, PRIMARY KEY (iam_account_id, iam_authority_id));
CREATE TABLE iam_account_group (iam_account_id BIGINT NOT NULL, iam_group_id BIGINT NOT NULL, PRIMARY KEY (iam_account_id, iam_group_id));
ALTER TABLE iam_account ADD CONSTRAINT FK_iam_account_iam_user_info_id FOREIGN KEY (iam_user_info_id) REFERENCES iam_account_user_info (ID);
ALTER TABLE iam_account ADD CONSTRAINT FK_iam_account_SAMLACCOUNT_ID FOREIGN KEY (SAMLACCOUNT_ID) REFERENCES iam_saml_account (ID);
ALTER TABLE iam_account ADD CONSTRAINT FK_iam_account_oidc_account_id FOREIGN KEY (oidc_account_id) REFERENCES iam_oidc_account (ID);
ALTER TABLE iam_account_authority ADD CONSTRAINT FK_iam_account_authority_iam_account_id FOREIGN KEY (iam_account_id) REFERENCES iam_account (ID);
ALTER TABLE iam_account_authority ADD CONSTRAINT FK_iam_account_authority_iam_authority_id FOREIGN KEY (iam_authority_id) REFERENCES iam_authority (ID);
ALTER TABLE iam_account_group ADD CONSTRAINT FK_iam_account_group_iam_group_id FOREIGN KEY (iam_group_id) REFERENCES iam_group (ID);
ALTER TABLE iam_account_group ADD CONSTRAINT FK_iam_account_group_iam_account_id FOREIGN KEY (iam_account_id) REFERENCES iam_account (ID);