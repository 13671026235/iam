<div class="modal-header">
    <h3 class="modal-title">Add OpenID Connect account to <strong>{{$ctrl.user.name.formatted}}</strong></h3>
</div>
<div class="modal-body">
    <form name="addOidcId">
        <div class="form-group" ng-class="{'has-error': 
        (addOidcId.issuer.$dirty && !addOidcId.issuer.$valid) || $ctrl.error }">
            <label>OpenID provider Issuer </label>
            <input id="add-oidc-issuer" name="issuer" class="form-control" type="text" placeholder="OpenID Provider issuer..." ng-model="$ctrl.account.issuer"
                required="true" ng-maxlength="256">

             <span class="help-block" ng-if="addOidcId.issuer.$dirty && addOidcId.issuer.$error.required">
                Please set the OpenID provider ID
            </span>
            <span class="help-block" ng-if="addOidcId.issuer.$dirty && addOidcId.issuer.$error.maxlength">
                OpenID provider ID must be at most 256 characters long
            </span>
        </div>

        <div class="form-group"  ng-class="{'has-error': 
        (addOidcId.subject.$dirty && !addOidcId.subject.$valid) || $ctrl.error }">
            <label>OpenID provider subject</label>
            <input id="add-oidc-subject" name="subject" class="form-control" type="text" placeholder="OpenID provider subject..." ng-model="$ctrl.account.subject"
                required="true" maxlength="256">
            <span class="help-block" ng-if="addOidcId.subject.$dirty && addOidcId.subject.$error.required">
                Please set the OpenID provider subject
            </span>
            <span class="help-block" ng-if="addOidcId.subject.$dirty && addOidcId.subject.$error.maxlength">
                OpenID provider subject must be at most 256 characters long
            </span>
            <span class="help-block" ng-if="$ctrl.error">
                {{ $ctrl.error.data.detail }}
            </span>
        </div>
        
    </form>
</div>

<div class="modal-footer">
    <button class="btn btn-primary" type="button" id="modal-btn-confirm" ng-disabled="!$ctrl.account.issuer ||  !$ctrl.account.subject || !$ctrl.enabled"
        ng-click="$ctrl.doAdd()">Add Account</button>
    
    <button class="btn btn-danger" type="button" id="modal-btn-cancel" ng-click="$ctrl.cancel()">Cancel</button>
</div>