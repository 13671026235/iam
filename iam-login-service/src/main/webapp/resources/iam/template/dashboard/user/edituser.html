<form class="form-horizontal" ng-submit="editUserCtrl.submit()"
	name="userUpdateForm" id="userUpdateForm">

	<div class="modal-header">
		<h3 class="modal-title">User update form</h3>
	</div>

	<div class="modal-body">

		<div ng-show="editUserCtrl.operationResult != null">
			<div class="alert"
				ng-class="{'alert-success': editUserCtrl.operationResult=='ok', 'alert-danger': editUserCtrl.operationResult=='err'}">
				<button class="close" ng-click="editUserCtrl.operationResult=null"
					aria-label="close">&times;</button>
				{{editUserCtrl.textAlert}}
			</div>
		</div>

		<div class="form-group">
			<label class="control-label col-sm-2" for="name">Name</label>
			<div
				ng-class="{'has-error': userUpdateForm.name.$dirty && userUpdateForm.name.$invalid, 'has-success': userUpdateForm.name.$dirty && !userUpdateForm.name.$invalid}">
				<div class="col-sm-10">
					<input class="form-control" name="name" id="name" type="text"
						ng-model="editUserCtrl.user.givenName" placeholder="First name"
						required ng-minlength="3" /> <span
						class="glyphicon form-control-feedback"
						ng-class="{'glyphicon-remove': userUpdateForm.name.$dirty && userUpdateForm.name.$invalid, 'glyphicon-ok': userUpdateForm.name.$dirty && userUpdateForm.name.$valid}"
						style="right: 15px"></span> <span class="help-block"
						ng-show="userUpdateForm.name.$dirty && userUpdateForm.name.$error.required">
						This is a required field</span> <span class="help-block"
						ng-show="userUpdateForm.name.$dirty && userUpdateForm.name.$error.minlength">Minimum
						length required is 3</span> <span class="help-block"
						ng-show="userUpdateForm.name.$dirty && userUpdateForm.name.$invalid">This
						field is invalid</span>
				</div>
			</div>
		</div>

		<div class="form-group">
			<label class="control-label col-sm-2" for="surname">Surname</label>
			<div
				ng-class="{'has-error': userUpdateForm.surname.$dirty && userUpdateForm.surname.$invalid, 'has-success': userUpdateForm.surname.$dirty && !userUpdateForm.surname.$invalid}">
				<div class="col-sm-10">
					<input class="form-control" name="surname" id="surname" type="text"
						ng-model="editUserCtrl.user.familyName" placeholder="Family name"
						required ng-minlength="3" /> <span
						class="glyphicon form-control-feedback"
						ng-class="{'glyphicon-remove': userUpdateForm.surname.$dirty && userUpdateForm.surname.$invalid, 'glyphicon-ok': userUpdateForm.surname.$dirty && userUpdateForm.surname.$valid}"
						style="right: 15px"></span> <span class="help-block"
						ng-show="userUpdateForm.surname.$dirty && userUpdateForm.surname.$error.required">
						This is a required field</span> <span class="help-block"
						ng-show="userUpdateForm.surname.$dirty && userUpdateForm.surname.$error.minlength">Minimum
						length required is 3</span> <span class="help-block"
						ng-show="userUpdateForm.surname.$dirty && userUpdateForm.surname.$invalid">This
						field is invalid</span>
				</div>
			</div>
		</div>

		<div class="form-group">
			<label class="control-label col-sm-2" for="email">Email</label>
			<div
				ng-class="{'has-error': userUpdateForm.email.$dirty && userUpdateForm.email.$invalid, 'has-success': userUpdateForm.email.$dirty && !userUpdateForm.email.$invalid}">
				<div class="col-sm-10">
					<input class="form-control" name="email" id="email" type="email"
						ng-model="editUserCtrl.user.email" placeholder="Email" required />
					<span class="glyphicon form-control-feedback"
						ng-class="{'glyphicon-remove': userUpdateForm.email.$dirty && userUpdateForm.email.$invalid, 'glyphicon-ok': userUpdateForm.email.$dirty && userUpdateForm.email.$valid}"
						style="right: 15px"></span> <span class="help-block"
						ng-show="userUpdateForm.email.$dirty && userUpdateForm.email.$error.required">This
						is a required field</span> <span class="help-block"
						ng-show="userUpdateForm.email.$dirty && userUpdateForm.email.$invalid">This
						field is invalid </span>
				</div>
			</div>
		</div>

		<div class="form-group">
			<label class="control-label col-sm-2" for="username">Username</label>
			<div
				ng-class="{'has-error': userUpdateForm.username.$dirty && userUpdateForm.username.$invalid, 'has-success': userUpdateForm.username.$dirty && !userUpdateForm.username.$invalid}">
				<div class="col-sm-10">
					<input class="form-control" id="username" name="username" ng-disabled="$root.loggedUser.info.sub == editUserCtrl.user.id"
						type="text" ng-model="editUserCtrl.user.userName"
						placeholder="Username" required ng-minlength="3"
						iam-username-available-validator
						ng-model-options="{ debounce : { 'default' : 500 } }" /> <span
						class="glyphicon form-control-feedback"
						ng-class="{'glyphicon-remove': userUpdateForm.username.$dirty && userUpdateForm.username.$invalid, 'glyphicon-ok': userUpdateForm.username.$dirty && userUpdateForm.username.$valid}"
						style="right: 15px"></span> <span class="help-block"
						ng-show="userUpdateForm.username.$dirty && userUpdateForm.username.$error.required">
						This is a required field</span> <span class="help-block"
						ng-show="userUpdateForm.username.$dirty && userUpdateForm.username.$error.minlength">Minimum
						length required is 3</span> <span class="help-block"
						ng-show="userUpdateForm.username.$dirty && userUpdateForm.username.$error.unique">Username
						already in use</span> <span class="help-block"
						ng-show="userUpdateForm.username.$dirty && userUpdateForm.username.$invalid">This
						field is invalid</span>
				</div>
			</div>
		</div>

		<div class="form-group">
			<label class="control-label col-sm-2" for="picture">Picture</label>
			<div ng-class="{'has-error': userUpdateForm.picture.$dirty && userUpdateForm.picture.$invalid, 'has-success': userUpdateForm.picture.$dirty && userUpdateForm.picture.$valid}">
				<div class="col-sm-10">
					<input class="form-control" id="picture" name="picture" type="url" ng-model="editUserCtrl.user.picture" /> 
					<span class="glyphicon form-control-feedback"
						ng-class="{'glyphicon-remove': userUpdateForm.picture.$dirty && userUpdateForm.picture.$invalid, 'glyphicon-ok': userUpdateForm.picture.$dirty && userUpdateForm.picture.$valid}"
						style="right: 15px"></span> <span class="help-block"
						ng-show="userUpdateForm.picture.$dirty && userUpdateForm.picture.$invalid">This
						field is invalid</span> <span class="help-block"
                        ng-show="userUpdateForm.picture.$dirty && userUpdateForm.picture.$error.url">
                        This field is not a valid URL</span>
				</div>
				<div class="col-sm-12">
					<br /> <img src="{{editUserCtrl.user.picture}}" ng-show="!(userUpdateForm.picture.$dirty && userUpdateForm.picture.$invalid) && editUserCtrl.user.picture"
						class="profile-user-img img-responsive img-circle"
						 />
				</div>
			</div>
		</div>

	</div>

	<div class="modal-footer">

		<button class="btn btn-primary btn-sm" type="submit" name="create" id="modal-btn-confirm"
			ng-disabled="userUpdateForm.$invalid || !userUpdateForm.$dirty">Update</button>
		<button class="btn btn-danger btn-sm" type="button" name="dismiss" id="modal-btn-cancel"
			ng-click="editUserCtrl.dismiss()">Cancel</button>
	</div>

</form>
